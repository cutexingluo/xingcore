# XingCore **æ ¸å¿ƒå·¥å…·åŒ…**

## :book:ç›¸å…³ä»‹ç»

**xingcore**, XingCore, xingheï¼Œæ„ä¸ºâ€œæ˜Ÿæ ¸â€ï¼Œä½œä¸º Xing Java ç³»åˆ—å·¥å…·åº“ä»£ç ç²¾åéƒ¨åˆ†ï¼Œä½œä¸ºåç»­ Xing Javaå·¥å…·åº“çš„åŸºç¡€ã€å†…æ ¸ã€ä¾èµ–ï¼Œä¹Ÿæ˜¯åç»­ Javaå·¥å…·åº“çš„æ ‡å‡†ã€è§„èŒƒã€‚

### :scroll:ç®€ä»‹

æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œä¸”æ˜“ç”¨çš„ **Javaå·¥å…·åº“**ï¼Œé€šè¿‡è¯¸å¤šå®ç”¨å·¥å…·ç±»çš„ä½¿ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿã€ä¾¿æ·åœ°å®Œæˆå„ç±»å¼€å‘ä»»åŠ¡ã€‚

XingCore åŒ…å«ä¸€ç³»åˆ—æ¥å£ï¼ŒåŸºç¡€å®ç°ï¼Œæ¶µç›–æ ¸å¿ƒå·¥å…·ã€åŠ å¯†ã€æ•°æ®ç»“æ„ç®—æ³•ç­‰å¤šä¸ªé¢†åŸŸã€‚

è¿™äº›å°è£…åŒ…å«äº†ç³»åˆ—å­—ç¬¦ä¸²ã€æ•°å­—ã€é›†åˆã€ç¼–ç ã€æ—¥æœŸã€æ–‡ä»¶ã€IOã€åŠ å¯†ã€æ•°æ®åº“JDBCã€JSONã€HTTPå®¢æˆ·ç«¯ç­‰ä¸€ç³»åˆ—åŸºç¡€æ“ä½œï¼Œè¿˜åŒ…å«äº† ACMæ•°æ®ç»“æ„ç®—æ³•ï¼Œå„ç§baseæ¥å£ï¼Œå¿«é€Ÿå¼€å‘å·¥å…·ç±»ï¼ˆé“¾å¼è°ƒç”¨ã€é€»è¾‘å»ºé€ ï¼‰ï¼Œå¯ä»¥æ»¡è¶³å„ç§ä¸åŒçš„å¼€å‘éœ€æ±‚ã€‚

###   :golf:æœ¬åŒ…è¯´æ˜

æœ¬å·¥å…·åº“éµä»**é¢å‘æ¥å£**ï¼Œæ‰€ä»¥æ¥å£å¯èƒ½åˆ†å¾—ç‰¹åˆ«ç»†ã€‚

è¯¥ core å·¥å…·åŒ…å°†æ ¸å¿ƒæ‹†åˆ†åº”å¯¹ä¸åŒä½¿ç”¨æƒ…å†µï¼Œå¤§å¤§æé«˜çµæ´»æ€§ï¼Œæœªæ¥sdkå¯èƒ½ä¼šä¾èµ–è¯¥sdk, å¦‚ xingtools ç­‰ã€‚

æ˜Ÿå¤©ï¼ˆxingtianï¼‰åˆ¶ä½œï¼ŒåŸºäº Java 8 å‘å‰å…¼å®¹ï¼Œ æ˜¯ä¸€ä¸ªæ•´åˆå„å·¥å…·ç±»çš„æ•´åˆåŒ…ã€‚

## :bookmark:ä¾èµ–ä½¿ç”¨

### :inbox_tray:å®‰è£…æ•™ç¨‹

> ä½¿ç”¨ Maven å¯¼å…¥ä¾èµ–ï¼Œé€‰æ‹©ä¸‹é¢ä¸€ä¸ªæ–¹å¼

Maven ä¾èµ– ï¼ˆå…¨é‡ç‰ˆæœ¬ï¼‰ï¼ˆä¼šæºå¸¦ Jackson ç­‰ç³»åˆ—åŒ…ï¼‰

```xml
<dependency>
	<groupId>top.cutexingluo.core</groupId>
	<artifactId>xingcore-common-all</artifactId>
	<version>1.2.0</version>
</dependency>
```

Maven ä¾èµ–ï¼ˆæ— é¢å¤–ä¾èµ–ï¼‰

```xml
<dependency>
	<groupId>top.cutexingluo.core</groupId>
	<artifactId>xingcore-common</artifactId>
	<version>1.2.0</version>
</dependency>
```



mini ç‰ˆï¼ˆå»é™¤ base-extra åŒ…ï¼Œç²¾åç‰ˆæœ¬ï¼‰

Maven ä¾èµ– ï¼ˆå…¨é‡ç‰ˆæœ¬ï¼‰ï¼ˆä¼šæºå¸¦ Jackson ç­‰ç³»åˆ—åŒ…ï¼‰

```xml
<dependency>
	<groupId>top.cutexingluo.core</groupId>
	<artifactId>xingcore-mini-all</artifactId>
	<version>1.2.0</version>
</dependency>
```

Maven ä¾èµ–ï¼ˆæ— é¢å¤–ä¾èµ–ï¼Œæœ€ç®€ç‰ˆæœ¬ï¼Œåªå«ä¸‰ä¸ªåŒ…ï¼‰

```xml
<dependency>
	<groupId>top.cutexingluo.core</groupId>
	<artifactId>xingcore-mini</artifactId>
	<version>1.2.0</version>
</dependency>
```



ç›®å‰æ¨èä½¿ç”¨çš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š

```txt
æ¨èä½¿ç”¨æœ€æ–°ç‰ˆ v1.2.0
xingcore v1.2.0
```

xingcore æœ€ä½ç‰ˆæœ¬ä¸èƒ½ä½äº v1.2.0

## :wrench:åŒ…å«ç»„ä»¶

| æ¨¡å—                | ä»‹ç»                                                         |
| ------------------- | ------------------------------------------------------------ |
| xingtools-base      | åŸºç¡€åŒ…ï¼ŒåŒ…å«å„ç§æ¥å£ï¼Œæšä¸¾ç±»ç­‰ï¼Œä¸å«ä»»ä½•å®ä½“ç±»ï¼Œåšå…¬ç”¨å£°æ˜   |
| xingtools-base-impl | åŸºç¡€å®ç°åŒ…(ä¾èµ–xingcore-base)ï¼ŒåŒ…å«å„ç§æ¥å£çš„å®ç°ç±»ï¼Œä»¥åŠå„ç§å¸¸ç”¨åŸºç¡€å®ä½“ç±»ã€å¤„ç†ç±» |
| xingtools-base-lib  | åŸºç¡€å·¥å…·åŒ…(ä¾èµ–xingcore-base-impl)ï¼ŒåŒ…å«å„ç§å¸¸ç”¨å·¥å…·ç±»       |
| xingcore-base-extra | æ‰©å±•åŒ…(ä¾èµ–xingcore-base-lib)ï¼ŒåŒ…å«å„ç§æ‰©å±•ç±»ï¼Œä¸å¸¸ç”¨ç±»ï¼Œä»¥åŠä¸ç¨³å®šå·¥å…·ï¼ˆæœªæ¥å¸¸å˜åŒ–ï¼‰ |
|                     |                                                              |
| xingcore-bom        | bomåŒ…ï¼Œç”¨äºç®¡ç†ä¾èµ–ç‰ˆæœ¬                                      |
|                     |                                                              |
| xingcore-mini       | å«ï¼ˆbaseã€base-implã€base-libï¼‰ä¸‰ä¸ªåŸºç¡€åŒ…ï¼Œæ— é¢å¤–åŒ…          |
| xingcore-mini-all   | å«ï¼ˆbaseã€base-implã€base-libï¼‰ä¸‰ä¸ªåŸºç¡€åŒ…ï¼Œä»¥åŠé™„åŠ åŒ…        |
| xingcore-common     | å«å…¨éƒ¨å››ä¸ªåŸºç¡€åŒ…ï¼Œæ— é¢å¤–åŒ…                                   |
| xingcore-common-all | å«å…¨éƒ¨å››ä¸ªåŸºç¡€åŒ…ï¼Œä»¥åŠé™„åŠ åŒ…                                 |

å½“å‰ç‰ˆæœ¬ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»å¦‚ä¸‹ï¼š

xingtools-base <- xingtools-base-impl <- xingtools-base-lib <- xingcore-base-extra

## :apple:ä½¿ç”¨æ–¹å¼

### :lemon:ä½¿ç”¨è®²è§£

æ ¹æ®ç±»åæ„æ€äº†è§£è¯¥åŠŸèƒ½ï¼Œå¥½å¤„æ˜¯æš‚æ—¶ä¸ç”¨æŸ¥æ–‡æ¡£ï¼Œå¹¶ä¸”å’Œhutooläº’è¡¥ï¼Œèƒ½å¤ŸåŠ å¿«å¼€å‘æ•ˆç‡.

1. å¯ä»¥é€šè¿‡`Util.`é™æ€ç±»çš„æ–¹å¼è°ƒå‡ºé™æ€æ–¹æ³•ï¼Œä¸€èˆ¬ç”±`XT`å¼€å¤´çš„ç±»ï¼Œä¾‹å¦‚`XTObjUtil`, `XTStrUtil` ç­‰ï¼Œä»¥ä¾¿ç›´æ¥è°ƒå‡ºç±»åã€æ–¹æ³•ã€‚
2. é€šè¿‡ new ä¸€ä¸ªå·¥å…·æ“ä½œç±» `Handler`ç­‰
3. é€šè¿‡ of ç­‰æ–¹å¼ä½¿ç”¨ï¼Œä¾‹å¦‚ `new StreamChain()` æˆ– `StreamChain.of()`

## ğŸ§°éƒ¨åˆ†ä»£è¡¨åŠŸèƒ½

### âš™ï¸ å·¥å…·ç±»

#### 1.æ•°æ®å°è£…æ¥å£ ï¼ˆ`IResultData`, `IResult`ï¼‰

`IR`, `IResultData`, `IResult` åˆ†åˆ«è¿½åŠ æä¾› getMsg, getCode, getData æ–¹æ³•

`IResultDataSource`, `IResultSource` ç»§ç»­è¿½åŠ  setMsg, setCode, setData æ–¹æ³•

ä¾‹å¦‚`IResultData`æ¥å£å¦‚ä¸‹

```java
public interface IResultData<T> extends IR {
    T getCode();
}
```

å¯ä»¥æ ¹æ®é¢å‘æ¥å£å®ç°æ–¹æ³•ï¼Œæ¥æ»¡è¶³å¼‚å¸¸å¸¸é‡ã€è¿”å›ç±»ã€å¼‚å¸¸çš„ç»Ÿä¸€ã€‚

```java
// å¼‚å¸¸å¸¸é‡
@Getter
public enum EnumResult implements IResultData<Integer> {
    // æˆåŠŸ
    SUCCESS(200, "æ“ä½œæˆåŠŸ");
    private final int code;//çŠ¶æ€ç 
    private final String msg;//çŠ¶æ€ç å¯¹åº”çš„ä¿¡æ¯
}
// å¼‚å¸¸
@Getter
public class ServerException extends RuntimeException implements IResultData<Integer>{
    private int code;
    @Override
    public String getMsg() {
        return super.getMessage();
    }
}
// è¿”å›ç±»
@Data
@Accessors(chain = true)
public class MyResult<T> implements IResultSource<Integer, T> {
    private Integer code;
    private String msg;
    private T data;
    
    // é¢å‘æ¥å£
    public static <T> MyResult<T> successBy(IResultData<Integer> origin) {
        MyResult<T> result = new MyResult<>();
        result.setCode(origin.getCode());
        result.setMsg(origin.getMsg());
        return result;
    }
}
```

ç„¶åå¯ä»¥é€šè¿‡ ResultUtil å·¥å…·ç±»è¿›è¡Œå°è£…è¿”å›å€¼ã€‚

```java
// controller ç¤ºä¾‹
@RestController
@RequestMapping("/common")
public class CaptchaController {
    ...
    @GetMapping("/captcha") 
    public MyResult<?> getCaptchaInfo() {
        XX xx = testService.getXX();
        
        // ResultUtil å·¥å…·ç±»
        return ResultUtil.selectFill(xx,
                EnumResult.SUCCESS, 
                EnumResult.ERROR,
                new MyResult<>());
        
		//  é»˜è®¤ç­–ç•¥(å¯ä»¥æ›´æ”¹) ç­‰åŒäºä¸‹é¢ 
        
        return captcha == null || Boolean.FALSE.equals(xx)  ? 
            	MyResult.errorBy(EnumResult.ERROR):
                MyResult.successBy(EnumResult.SUCCESS).setData(xx);
    }
}
```

åœ¨`1.0.3`ç‰ˆæœ¬æä¾›äº†å‡ ä¸ªåŸºç¡€å®ç°ç±»

`CommonResult` ï¼ˆé€šç”¨è¿”å›ç±»ï¼‰

`MSResult<T>` (æˆ– `R`), `Result`, `StrMSResult<T>`, `StrResult`  (code ä¸º `Integer`æˆ– `String` , data ä¸º æ³›å‹ Tæˆ–`Object` çš„ å››ä¸ªç»„åˆ)

`CommonResult` ç±»çš„åŸºæœ¬å±æ€§å¦‚ä¸‹ï¼š

```java
@Data
public class CommonResult<C, T> implements IResultSource<C, T> {
    protected C code;
    protected String msg;
    protected T data;
}
```

**è´¯å½»é¢å‘æ¥å£ï¼**

#### 2.é”ã€å¼‚æ­¥(å¤šçº¿ç¨‹)

é”æä¾›åŸºæœ¬çš„ LockHandler ç±»ï¼Œä»¥åŠä¸‹é¢çš„å­ç±» XTLockHandler , XTExtLockHandler ç­‰ç±»ã€‚

ä¸‹é¢æ˜¯ LockHandler çš„åŸºæœ¬ä½¿ç”¨ã€‚

```java
    @Test
    void test() {
        XTLockMeta lockMeta = new XTLockMeta(XTLockType.ReentrantLock); // å¯é‡å…¥é”
        LockHandler lockHandler = new LockHandler(lockMeta);
        lockHandler.init();
        // Spring çš„çº¿ç¨‹æ± 
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);
        executor.setMaxPoolSize(10);
        executor.initialize();


        // Runnable æ¥å£
        XTAsync.runAsync(() -> { // ç»§æ‰¿ CompleteFuture ç±»ï¼Œæ‰©å±•äº†ä¸€äº›é™æ€æ–¹æ³•
            lockHandler.lock(() -> {// Callable æ¥å£
                for (int i = 0; i < 20; i++) {
                    XTJUC.sleepMillis(100); // ç›®å‰ä»…ä¸¤ä¸ªçº¿ç¨‹æ–¹æ³•ï¼Œç¡100ms
                    System.out.println(Thread.currentThread().getName() + "," + i);
                }
                return null; // è¿”å›å€¼
            }, null);
        }, executor);


        XTAsync.runAsync(() -> {
            lockHandler.lock(() -> {
                for (int i = 0; i < 20; i++) {
                    XTJUC.sleepMillis(80);
                    System.out.println(Thread.currentThread().getName() + "," + i);
                }
                return null;
            }, null);

        }, executor);

        XTJUC.sleepMillis(100_000);
    }
```

#### 3.å„ç§å·¥å…·ç±»

æ¯”å¦‚ `XTStrUtil` , `XTCollUtil` , `XTMapUtil` ç­‰ç­‰æ‰©å±•ç±»ï¼Œå‡æ˜¯ç»§æ‰¿ hutool åŒ…çš„å¯¹åº”å·¥å…·ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç›®æ ‡ç±»æˆ–æ‰©å±•ç±»ã€‚

å„ç§éœ€æ±‚ç¤ºä¾‹

```java
// æ›¿æ¢ ${} æ‹¬å·é‡Œçš„å†…å®¹
XTPickUtil.putValueFromBraces("ä½ ä»¬å¥½ï¼ ${}, ä½ å¥½ï¼","XXX");

// æ ¹æ® value åˆ é™¤ Map çš„å€¼
HashMap<Integer,String> map = new HashMap<>();
XTMapUtil.deleteByValueWithStream(map, "hello world");

// ä¸º value çš„ collection æ·»åŠ æ•°æ®
HashMap<Integer,List<String>> map = new HashMap<>();
XTMapUtil.checkAddAll(hashMap1, "hello", ArrayList::new,
                          Arrays.asList("hello", "world"));

// ç»„åˆè·¯å¾„ xx/aa
XTPathUtil.combinePath("xx", "aa", XTPathUtil.UNIX_SEPARATOR);
XTPathUtil.combinePath("xx/", "/aa", XTPathUtil.UNIX_SEPARATOR);

// json åºåˆ—åŒ–
// Jackson æ¨¡æ‹Ÿ FastJson
JacksonSerializer serializer = new JacksonSerializer().initToFastJson();
String s = serializer.stringify(new XX());

// ä»¿ JS Apply, Call, Bind
new XTApply(PrintClass.class, "print", String.class).apply(target,"hello world");
new XTCall(PrintClass.class, "print", String.class).call(target,"hello world");
new XTBind("print", String.class).bind(target,"hello world");

// æ‰©å±•æ¯”è¾ƒå™¨ XTComparable, XTComparator, å¯ä»¥æ¯”è¾ƒ null
XTComparator c = new XTComparator(true); // æ­£åºæ¯”è¾ƒ, å¦‚æœæ˜¯åœ¨ sort é‡Œé¢ , true -> null å€¼æ’æœ€å, false -> null æ’å‰é¢
c.tryCompareNull(null , 1);

// åå°„å·¥å…· ClassMaker
ClassMaker<XX> cm = new ClassMaker(XX.class);
XX xx = cm.newInstanceNoExc(); // é™é»˜å®ä¾‹åŒ–

// æœªå®Œå¾…ç»­
```

#### 4.é«˜çº§å»ºé€ å·¥å…·ï¼ˆ`BuilderMapChain`, `StreamChain`ï¼‰

##### 1.HashMapæ‰©å±•

ä¸º HashMap æ·»åŠ å€¼

```java
void test() {
    HashMap<String, Integer> hashMap = new HashMap<>();

    // ä¸º map æ·»åŠ  key,value å¯¹
    int i = XTHashMap.putMapEntriesFromDValues(
        hashMap,
        "hello", 1,
        "world", 2
    );


    System.out.println(hashMap); // {world=2, hello=1}

	// ä¸º map çš„ list value è¡¥å……å€¼, check ä»£è¡¨ä¸å­˜åœ¨å°± new ä¸€ä¸ªArrayListå¡«å……è¿›å»
    HashMap<String, List<String>> hashMap1 = new HashMap<>();
    XTMapUtil.checkAddAll(hashMap1, "hello", ArrayList::new,
                          Arrays.asList("hello", "world"));
    XTMapUtil.checkAddAll(hashMap1, "hello", ArrayList::new,
                          Arrays.asList("hello1", "world1"));


    System.out.println(hashMap1); // {hello=[hello, world, hello1, world1]}
}
```

##### 2.Optional åŠŸèƒ½æ‰©å±•ç±» StreamChain

StreamChain åŒ…å« Optional å‡ ä¹æ‰€æœ‰æ–¹æ³•ï¼Œè¿˜å¯¹å…¶è¿›è¡Œäº†æ‰©å±•

```java
void test() {
    StreamChain<Integer> chain = StreamChain.ofNullable(null)
        .directMap(v -> v == null ? 2 : (int) v + 1);
    System.out.println(chain); // StreamChain[2]

    StreamChain<Integer> streamChain = new ObjectStreamChain(1)
        .cast(Integer.class)
        .flatMap(StreamChain::ofNullable)
        .map(v -> v + 1);
    System.out.println(streamChain); // StreamChain[2]

    ObjectStreamChain objectStreamChain = new ObjectStreamChain(2);
    System.out.println(objectStreamChain);// StreamChain[2]

    System.out.println(objectStreamChain.equals(streamChain)); // true

    StreamChain<Integer> opt = StreamChain.ofNullable(1);
    List<Integer> collect = opt.stream().collect(Collectors.toList());
    Integer integer = opt
        .flatMap(StreamChain::of)
        .get();
    System.out.println(integer); // 1
    System.out.println(opt); // StreamChain[1]
    System.out.println(collect); // [1]

}
```

##### 3.é«˜çº§å»ºé€ ç±» BuilderMapChain

ç”Ÿæˆä¸€ä¸ªå»ºé€ æ ‘ï¼Œå¦‚æœå½“å‰å±‚çš„å€¼ä¸å­˜åœ¨ï¼Œä¾¿å¯ä»¥ä»å…¶ä»–å…„å¼ŸèŠ‚ç‚¹è·å–æˆ–ç”Ÿæˆï¼Œæˆ–è€…ä»çˆ¶èŠ‚ç‚¹ç”Ÿæˆï¼Œç›´åˆ°å¾—åˆ°å€¼ï¼Œè¿”å›ã€‚

```java
void test() {
    BuilderMapChain chain = new BuilderMapChain(3, null,  () -> {
        // ç¬¬1å±‚
        return "ç¬¬1å±‚,";
    }).withGetter(null, o -> {
        // ç¬¬2å±‚
        String str = (String) o;
        str += "ç¬¬2å±‚,";
        return str;
    }).withListGetter(null, Arrays.asList( // ç¬¬3å±‚
        (o) -> { // ä»ä¸Š1å±‚è·å–æ•°æ®
            String str = (String) o;
            str += "ç¬¬3å±‚-1,";
            return str;
        },
        (o) -> { // ä»ä¸Š2å±‚è·å–æ•°æ®
            String str = (String) o;
            str += "ç¬¬3å±‚-2,";
            return str;
        }
    ));
    
    // ä¸‹é¢ä¸‰å—æ˜¯ç‹¬ç«‹çš„ï¼Œä¸åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…ï¼Œå› ä¸ºåˆ›å»ºä¾¿ä¼šå¡«å……æ•°æ®ï¼ˆä¸€æ¬¡æ€§å¯¹è±¡ï¼‰ã€‚
    
    Entry<Integer, String> entry = chain.createFrontDfs(3); // å‰é©±dfsåˆ›å»º3å±‚
    System.out.println(entry); // Entry [key=3, value=ç¬¬1å±‚,ç¬¬2å±‚,ç¬¬3å±‚-1,]
    String s = chain.getValue(3); // è·å–ç¬¬3å±‚æ•°æ®
    System.out.println(s); // ç¬¬1å±‚,ç¬¬2å±‚,ç¬¬3å±‚-1,

    Entry<Integer, String> entry2 = chain.createBackBfs(2); // åé©±bfsåˆ›å»º2å±‚
    System.out.println(entry2); // Entry [key=1, value=ç¬¬1å±‚,ç¬¬2å±‚,]
    String s2 = chain.getValue(2); // è·å–ç¬¬2å±‚æ•°æ®
    System.out.println(s2); // ç¬¬1å±‚,ç¬¬2å±‚,
    
    Entry<Integer, String> entry3 = chain.createBackDfs(3); // åé©±dfsåˆ›å»º3å±‚
    System.out.println(entry3); // Entry [key=2, value=ç¬¬1å±‚,ç¬¬3å±‚-2,]
    String s3 = chain.getValue(3); //è·å–ç¬¬3å±‚æ•°æ®
    System.out.println(s3); // ç¬¬1å±‚,ç¬¬3å±‚-2,
}
```

ç¬¬3å±‚æ•°æ®ä¸ä¸ºnullï¼Œåˆ™è¿”å›æ•°æ®ã€‚

ç¬¬3å±‚æ•°æ®ä¸ºnullï¼Œä¾¿ä»ç¬¬3å±‚

>frontï¼ˆList ä»å‰å¾€åï¼Œå‰é©±ï¼‰
>
>backï¼ˆList ä»åå¾€å‰ï¼Œåé©±ï¼‰è·å–ç”Ÿæˆæ–¹æ³•ï¼ˆç”¨äºç”Ÿæˆè¯¥å±‚æ•°æ®ï¼Œå¡«å……åˆ°è¯¥å±‚ï¼‰
>
>dfs ï¼ˆä¾æ¬¡è·å–ä¸Šå±‚æ•°æ®ï¼Œç›´è‡³èƒ½å¡«å……ç›®æ ‡å±‚æ•°æ®ï¼‰
>
>bfs ï¼ˆå…ˆæŠŠè¯¥å±‚Listéå†å®Œæˆï¼Œè¿˜æ²¡æœ‰å¡«å……æ•°æ®æ‰ä»ä¸Šå±‚è·å–ï¼‰

**é‚£ä¹ˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ**

ç¤ºä¾‹å¦‚ä¸‹ï¼š

```java
void test{
    ...
    ApplicationContext applicationContext = SpringUtils.getApplicationContext(); // Spring ä¸Šä¸‹æ–‡
    // åˆ›å»º3å±‚å»ºé€ æ ‘
    BuilderMapChain chain = new BuilderMapChain(3, applicationContext) 
        .with(redisTemplate, o -> { // redisTemplate æ•°æ®
            ApplicationContext ac = (ApplicationContext) o;
            return ac.getBean(RedisTemplate.class); // redisTemplate æ•°æ®ä¸å­˜åœ¨åˆ™ä»å®¹å™¨è·å–
        }).withList(redisCache, Arrays.asList(
        o -> {
            RedisTemplate<String, Object> rt = (RedisTemplate<String, Object>) o;
            return new RYRedisCache(rt); // å¡«å……è¿› RYRedisCache
        },
        o -> {
            ApplicationContext ac = (ApplicationContext) o;
            return ac.getBean(RYRedisCache.class); // RYRedisCache æ•°æ®ä¸å­˜åœ¨åˆ™ä»å®¹å™¨è·å–
        }
    ));
    
    // å¾—åˆ°ç”Ÿæˆçš„å€¼
    RYRedisCache redisCache = chain.createFrontDfs(3).getValue(3);
}
```

é‡Œé¢æœ‰è®¸è®¸å¤šå¤šå¿«é€Ÿå¼€å‘çš„å·¥å…·ï¼Œè¿˜è¯·å¤šå¤šç ”ç©¶ã€‚

#### 5.*ç³»åˆ—ç®—æ³•

ç®—æ³•éƒ½æ”¾åœ¨  top.cutexingluo.tools.utils.se.algo.cpp åŒ…ä¸‹ï¼Œé¡¾åæ€ä¹‰ï¼Œå·¥å…·/SE/ç®—æ³•/C++ï¼Œ

ä¾‹å¦‚äºŒåˆ†æŸ¥æ‰¾

```java
int index = XTBinarySearch.lowerBound(new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, 5);
// c++ std::lower_bound æ‰¾åˆ°å¤§äºæˆ–ç­‰äºç›®æ ‡çš„æ•°æ®çš„ä½ç½®, index = 4
```

ä¾‹å¦‚å­—ç¬¦ä¸²ç®—æ³•ï¼Œåœ¨å­—ç¬¦ä¸²é‡Œé¢æŸ¥æ‰¾å­ä¸²ï¼ŒåŸç”Ÿjavaæ˜¯ä¸€ä¸ªä¸ªåŒ¹é…ï¼Œé‡åˆ°å¤šé‡å¤å­—ç¬¦é€Ÿåº¦å˜æ…¢ã€‚

è¿™é‡Œæœ‰KMPç®—æ³•

```java
int index = XTStringAlgo.find("abcabcabc...abcdabcabcabc", "abcd");// æŸ¥æ‰¾é‡å¤å­—ç¬¦ä¸²
```

ä¾‹å¦‚æ•°æ®ç»“æ„ï¼Œç®€æ˜“çº¿æ®µæ ‘ï¼Œçº¿æ®µæ ‘ï¼ŒåŠ¨æ€çº¿æ®µæ ‘ï¼Œå¹³è¡¡äºŒå‰æ ‘ï¼Œæ ‘çŠ¶æ•°ç»„ï¼Œå­—å…¸æ ‘ï¼ŒSplayæ ‘ï¼ŒTreapæ ‘ï¼ŒB æ ‘ï¼ŒB+ æ ‘çš„åŸºç¡€å®ç°ï¼Œå¯ä¾›å‚è€ƒ

```java
BTree<String, String> tree = new BTree<>(3); // Bæ ‘
BPlusTree<String, String> tree = new BPlusTree<>(3); // B+æ ‘
tree.put("1", "1");
tree.put("4", "4");
tree.put("2", "2");
// å®ç° NavigableMap æ¥å£ï¼Œå…¼å®¹åŸºæœ¬æ“ä½œ
```

ä¾‹å¦‚æ•°å­¦

```java
Point a = new Point(1.0,1.0);
Point b = new Point(1.0,2.0);
double dis = a.distance(b); // ä¸¤ç‚¹è·ç¦»
Point middle = a.middle(b); // ä¸¤ç‚¹ä¸­ç‚¹
```

ä¾‹å¦‚å›¾è®ºï¼ŒDijkstra æœ€çŸ­è·¯ï¼Œæœ€å°ç”Ÿæˆæ ‘ï¼Œç½‘ç»œæµç­‰

ä¾‹å¦‚çŠ¶æ€æœºï¼ˆç±»ä¼¼ mapï¼‰

```java
NodeStateMachine<Integer, StatusNode<EnumPay, EnumPay>> stateMachine = new NodeStateMachine<>();
stateMachine.put(EnumPay.ALIPAY.getCode(),
        new StatusNode<>(EnumPay.ALIPAY,
                Arrays.asList(
                        EnumPay.ALIPAY,
                        EnumPay.WECHAT,
                        EnumPay.UNIONPAY
                )
        ));
stateMachine.put(EnumPay.WECHAT.getCode(),
        new StatusNode<>(EnumPay.WECHAT,
                Arrays.asList(
                        EnumPay.WECHAT,
                        EnumPay.UNIONPAY
                )
        ));
boolean accept = stateMachine.canAcceptNode(EnumPay.ALIPAY.getCode(), EnumPay.ALIPAY.getCode());
System.out.println(accept); // true

boolean accept1 = stateMachine.canAcceptNode(EnumPay.ALIPAY.getCode(), EnumPay.WECHAT.getCode());
System.out.println(accept1); // true

boolean accept2 = stateMachine.canAcceptNode(EnumPay.ALIPAY.getCode(), EnumPay.UNIONPAY.getCode());
System.out.println(accept2); // false

boolean accept3 = stateMachine.canAcceptNode(EnumPay.ALIPAY.getCode(), EnumPay.CASH.getCode());
System.out.println(accept3); // false

StatusNode<EnumPay, EnumPay> node = stateMachine.get(EnumPay.ALIPAY.getCode());
System.out.println(node); // StatusNode(node=ALIPAY, nextNodes=[ALIPAY, WECHAT, UNIONPAY])
boolean contains = node.getChildren().contains(EnumPay.ALIPAY);
System.out.println(contains); // true
```

### ğŸ”§ æ³¨è§£

#### 1.***å‚æ•°æ ¡éªŒ** ï¼ˆ@XxxStatusï¼‰

å¿…é¡»å¯¼å…¥ validation åŒ… å¹¶ä¸”å‚æ•°/ç±»ä¸Š `@Valid`æˆ–`@Validated`

ä¸åŒç±»å‹å‚æ•°æ ¡éªŒæ³¨è§£å¦‚ï¼š

`@IntStatus` (Integer), `@StrStatus` (String)

`@ShortStatus` (Short), `@DoubleStatus` (Double) ...

```java
@Data
public class MyUserQuery {

    @StrStatus(notBlankIfPresent = true, // 1.é¦–å…ˆå¦‚æœéç©ºå­—ç¬¦ä¸²å’Œ null å‡ä¼šè¿›å…¥ä¸‹ä¸€æ­¥
               anyStr = { // 2.å¿…é¡»åŒ¹é…çš„å­—ç¬¦ä¸²
            "1", "0" 
    }, message = "ç±»å‹æ ¼å¼é”™è¯¯") 
    private String type;

    @StrStatus(anyReg = { // æ­£åˆ™åŒ¹é…
            RegexPool.MOBILE
    }, message = "æ‰‹æœºæ ¼å¼é”™è¯¯") // éªŒè¯
    @StrJson(value = SensitiveSerializer.class, name = "PHONE") //è„±æ•
    private String phone;

    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼é”™è¯¯") //validationåŒ…çš„æ ¡éªŒ
    private String email;

    @StrJson(value = SensitiveSerializer.class, name = "") // è¿”å›å€¼è„±æ•
    private String password;
    
    @ShortStatus(
            matchNum = { // å¿…é¡»åŒ¹é…æ•°å­—
                    EnumDelFlag.NOT_DELETED_CODE,
                    EnumDelFlag.IS_DELETED_CODE
            },
            message = "åˆ é™¤çŠ¶æ€æ ¼å¼é”™è¯¯"
    )
    // @NotNull 
    // å¯ä»¥æ·»åŠ  @NotNullæ³¨è§£ (æ³¨æ„æ˜¯ validation åŒ…çš„) æˆ–è€… @ShortStatusæ³¨è§£é‡Œé¢ notNull=true
    private Short delFlag;
}
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œå„ç§æ ¡éªŒæ³¨è§£ç›¸äº’é…åˆï¼ŒåŠ å¿«ä»£ç çš„å¼€å‘ã€‚

#### 2.å¼‚æ­¥çº¿ç¨‹ 

1.å¯ä»¥ä½¿ç”¨**ç¼–ç¨‹å¼**ï¼Œä¾‹å¦‚ XTAsync, æˆ–è€…ä½ çš„ç±»å®ç° ThreadHelper æ¥å£æˆ–è€…  ThreadExecutorHelper æ¥å£

ä¸‹é¢ç¤ºä¾‹ä½œä¸º å¼‚æ­¥é…ç½®ï¼ŒåŒæ—¶å…¼å®¹ThreadPoolTaskExecutor, AsyncConfigurer(æ”¯æŒ@Async æ³¨è§£)å’Œ ThreadHelper (CompletableFuture ç¼–ç¨‹å¼æ“ä½œ)

```java
@EnableAsync
@Configuration
public class AsyncConfig implements AsyncConfigurer, ThreadHelper {

    @Autowired
    ThreadPoolTaskExecutor taskExecutor;

    @Override
    public Executor getAsyncExecutor() {
        return taskExecutor;
    }

    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return null;
    }

    @Override
    public Executor executor() {
        return taskExecutor;
    }
}
```

æ³¨å…¥è¯¥å¯¹è±¡å³å¯ä½¿ç”¨ThreadHelperé‡Œé¢çš„æ–¹æ³•







##  :memo:æ›´æ–°å…¬å‘Š

[æ›´æ–°å…¬å‘Š](./ReleaseNotes.md)
